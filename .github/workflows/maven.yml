name: Build and Deploy

on:
  workflow_dispatch:
  
jobs:
  manual-trigger-build:
    runs-on: ubuntu-latest
    outputs:
        CONTINUE_JOBS: ${{ steps.manual-trigger.outputs.CONTINUE_JOBS }}
    steps:
      - name: manual-trigger
        id: manual-trigger
        uses: benhamiltonpro/manual-trigger@v1.0.1
        with:
          RUN_NAME: "build"
  build:
    needs: manual-trigger-build
    if: ${{ needs.manual-trigger-build.outputs.CONTINUE_JOBS == 'true' }}
    runs-on: ubuntu-latest
    steps:
      - name: Runs plan
        run: echo "It runs plan"
  
  manual-trigger-deploy:
    needs: build
    runs-on: ubuntu-latest
    outputs:
        CONTINUE_JOBS: ${{ steps.manual-trigger.outputs.CONTINUE_JOBS }}
    steps:
      - name: manual-trigger
        id: manual-trigger
        uses: benhamiltonpro/manual-trigger@v1.0.1
        with:
          RUN_NAME: "deploy"
  deploy:
    needs: manual-trigger-deploy
    if: ${{ needs.manual-trigger-deploy.outputs.CONTINUE_JOBS == 'true' }}
    runs-on: ubuntu-latest
    steps:
      - name: Runs deploy
        run: echo "It runs deploy"
